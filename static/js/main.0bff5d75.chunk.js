(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{308:function(e,t,a){e.exports=a(595)},313:function(e,t,a){},595:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(21),s=a.n(l),c=(a(313),a(40)),o=a(41),i=a(44),u=a(42),m=a(45),d=a(30),p=a(56),h=function(){return n.a.createElement("nav",{className:"nav-wrapper blue darken-3"},n.a.createElement("div",{className:"container"},n.a.createElement(d.b,{to:"/",className:"brand-logo",style:{textDecoration:"none"}},"Ushare admin")))},E=function(e){var t=e.groups;return n.a.createElement("li",null,t&&t.map(function(e){return n.a.createElement(d.b,{to:"/group/".concat(e.id),style:{textDecoration:"none"},className:"collection-item avatar",key:e.id},n.a.createElement("img",{src:e.groupImage,alt:"",className:"circle"}),n.a.createElement("span",{className:"title"},e.groupName),n.a.createElement("p",null,"Members: ",e.members.length," ",n.a.createElement("br",null),e.groupDescription),n.a.createElement("div",{className:"secondary-content"},n.a.createElement("i",{className:"material-icons"},"add")))}))},b=a(43),g=a(35),f=a(17),v=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.groups;return n.a.createElement("div",{className:"container"},n.a.createElement("ul",{className:"collection with-header"},n.a.createElement("li",{className:"collection-header"},n.a.createElement("h4",{className:"mx-auto"},"Groups list")),n.a.createElement("li",{className:"collection-item"},n.a.createElement("form",{className:"nav-wrapper"},n.a.createElement("div",{className:"input-field"},n.a.createElement("input",{id:"search",type:"search",required:!0}),n.a.createElement("label",{className:"label-icon",htmlFor:"search"},n.a.createElement("i",{className:"material-icons"},"search")),n.a.createElement("i",{className:"material-icons"},"close")))),n.a.createElement(E,{groups:e})))}}]),t}(r.Component),N=Object(f.d)(Object(b.b)(function(e){return{groups:e.firestore.ordered.groups}}),Object(g.firestoreConnect)([{collection:"groups"}]))(v),S=a(46),O=a(598),y=a(597),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){a.setState({userId:e}),a.handleShow()},a.handleRemove=function(){a.props.removeMember(a.state.userId,a.props.group.id)},a.handleNoti=function(){return"Success"===a.props.status?n.a.createElement("div",{className:"alert alert-success alert-dismissible fade show",role:"alert"},"Successfully removed ",a.state.userId):null!==a.props.status&&"Success"!==a.props.status?n.a.createElement("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert"},a.props.status):void 0},a.removeBtn=function(){if(null===a.props.status)return n.a.createElement(O.a,{variant:"danger",onClick:a.handleRemove},"Remove")},a.handleShow=a.handleShow.bind(Object(S.a)(a)),a.handleClose=a.handleClose.bind(Object(S.a)(a)),a.state={show:!1,userId:"",removeBtn:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleClose",value:function(){this.setState({show:!1,userId:""}),this.props.changeRemoveStatus()}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.group,r=t.users;return a&&r?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"container"},n.a.createElement("h2",{className:"page-header text-center"},a.groupName),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4 order-md-2 mb-4 members-container"},n.a.createElement("h4",{className:"d-flex justify-content-between align-items-center mb-3"},"Members"),n.a.createElement("ul",{className:"collection with-header members-list"},r&&r.map(function(t){return n.a.createElement("li",{className:"collection-item avatar",key:t.id},n.a.createElement("img",{src:t.avatar,alt:"",className:"circle"}),n.a.createElement("span",{className:"title"},t.name),n.a.createElement("p",null,t.username," ",n.a.createElement("br",null)," ",t.department),n.a.createElement("button",{className:"secondary-content",onClick:e.handleClick.bind(null,t.id)},n.a.createElement("i",{className:"material-icons"},"clear")))})),n.a.createElement(d.b,{to:"/group/".concat(a.id,"/add"),style:{textDecoration:"none"}},n.a.createElement("button",{className:"btn btn-primary btn-block"},"Add member"))),n.a.createElement("div",{className:"col-md-8 order-md-1"},n.a.createElement("h4",{className:"mb-3"},"Newsfeed"),n.a.createElement("ul",{className:"collection with-header"},r&&r.map(function(e){return n.a.createElement("li",{className:"collection-item avatar",key:e.id},n.a.createElement("img",{src:e.avatar,alt:"",className:"circle"}),n.a.createElement("span",{className:"title"},e.name),n.a.createElement("p",null,e.username," ",n.a.createElement("br",null)," ",e.department))}))))),n.a.createElement(y.a,{show:this.state.show,onHide:this.handleClose},n.a.createElement(y.a.Header,{closeButton:!0},n.a.createElement(y.a.Title,null,"Remove following member?")),n.a.createElement(y.a.Body,null,r.filter(function(t){return t.username===e.state.userId}).map(function(e){return n.a.createElement("ul",{className:"collection with-header members-list",key:e.id},n.a.createElement("li",{className:"collection-item avatar"},n.a.createElement("img",{src:e.avatar,alt:"",className:"circle"}),n.a.createElement("span",{className:"title"},e.name),n.a.createElement("p",null,e.username," ",n.a.createElement("br",null)," ",e.department)))}),this.handleNoti()),n.a.createElement(y.a.Footer,null,this.removeBtn(),n.a.createElement(O.a,{variant:"secondary",onClick:this.handleClose},"Close")))):n.a.createElement("div",{className:"container"},n.a.createElement("ul",{className:"collection with-header"},n.a.createElement("h2",{className:"page-header text-center"},"Page loading")))}}]),t}(r.Component),j=Object(f.d)(Object(b.b)(function(e,t){var a=t.match.params.id,r=e.firestore.ordered.groups,n=r?r.filter(function(e){return e.id===a})[0]:null,l=e.firestore.ordered.users;return{group:n,users:l?l.filter(function(e){return void 0!==e.groups&&e.groups.includes(a)}):null,status:e.groups.removeStatus}},function(e){return{removeMember:function(t,a){return e(function(e,t){return function(a,r,n){n.getFirebase;var l=(0,n.getFirestore)(),s=l.batch();s.update(l.collection("groups").doc(t),{members:l.FieldValue.arrayRemove(e)}),s.update(l.collection("users").doc(e),{groups:l.FieldValue.arrayRemove(t)}),s.commit().then(function(){a({type:"REMOVE_MEMBER",member:e,group:t})}).catch(function(e){a({type:"REMOVE_MEMBER_ERROR",err:e})})}}(t,a))},changeRemoveStatus:function(){return e(function(e){e({type:"CHANGE_REMOVE_STATUS"})})}}}),Object(g.firestoreConnect)([{collection:"groups"},{collection:"users"}]))(w),R=a(307),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleUserSelect=function(e){a.setState({userId:e.value,selectedUser:e})},a.handleSubmit=function(e){e.preventDefault(),a.state.userId&&a.props.group.id?(a.props.addMember(a.state.userId,a.props.group.id),a.userOptions=[],a.setState({selectedUser:null})):console.log("Ngu")},a.handleNoti=function(){return"Success"===a.props.status?n.a.createElement("div",{className:"alert alert-success alert-dismissible fade show",role:"alert"},"Successfully added ",a.state.userId,n.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))):null!==a.props.status&&"Success"!==a.props.status?n.a.createElement("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert"},a.props.status,n.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))):void 0},a.state={selectedUser:null,userId:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[],a=this.props,r=a.group,l=a.users;if(r&&l){if(0===t.length)for(var s=0;s<l.length;s++)t.push({value:l[s].id,label:l[s].id});return n.a.createElement("div",{className:"container text-center"},n.a.createElement("form",{className:"form-signin mx-auto col-md-6",onSubmit:this.handleSubmit},n.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},r.groupName," - Add member"),n.a.createElement(R.a,{value:this.state.selectedUser,options:t,onChange:this.handleUserSelect,placeholder:"Select member",name:"userId",required:!0}),this.state.selectedUser&&l.filter(function(t){return t.username===e.state.userId}).map(function(e){return n.a.createElement("ul",{className:"collection with-header members-list",key:e.id},n.a.createElement("li",{className:"collection-item avatar"},n.a.createElement("img",{src:e.avatar,alt:"",className:"circle"}),n.a.createElement("span",{className:"title"},e.name),n.a.createElement("p",null,e.username," ",n.a.createElement("br",null)," ",e.department)))}),this.handleNoti(),n.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Add"),n.a.createElement(d.b,{to:"/group/".concat(r.id),style:{textDecoration:"none"}},n.a.createElement("button",{className:"btn btn-danger btn-block",type:"submit"},"Return"))))}return n.a.createElement("div",{className:"container"},n.a.createElement("ul",{className:"collection with-header"},n.a.createElement("h2",{className:"page-header text-center"},"Page loading")))}}]),t}(r.Component),C=Object(f.d)(Object(b.b)(function(e,t){var a=t.match.params.id,r=e.firestore.ordered.groups,n=r?r.filter(function(e){return e.id===a})[0]:null,l=e.firestore.ordered.users;return{group:n,users:l?l.filter(function(e){return void 0===e.groups||!e.groups.includes(a)}):null,status:e.groups.addStatus}},function(e){return{addMember:function(t,a){return e(function(e,t){return function(a,r,n){n.getFirebase;var l=(0,n.getFirestore)(),s=l.batch();s.update(l.collection("groups").doc(t),{members:l.FieldValue.arrayUnion(e)}),s.update(l.collection("users").doc(e),{groups:l.FieldValue.arrayUnion(t)}),s.commit().then(function(){a({type:"ADD_MEMBER",member:e,group:t})}).catch(function(e){a({type:"ADD_MEMBER_ERROR",err:e})})}}(t,a))},changeAddStatus:function(){return e(function(e){e({type:"CHANGE_ADD_STATUS"})})}}}),Object(g.firestoreConnect)([{collection:"groups"},{collection:"users"}]))(M),k=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement(d.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(h,null),n.a.createElement(p.c,null,n.a.createElement(p.a,{exact:!0,path:"/",component:N}),n.a.createElement(p.a,{exact:!0,path:"/group/:id",component:j}),n.a.createElement(p.a,{path:"/group/:id/add",component:C}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A={addStatus:null,removeStatus:null},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MEMBER":return console.log("added member:",t.member,"to:",t.group),e.addStatus="Success",console.log(e.addStatus),e;case"ADD_MEMBER_ERROR":return console.log("Error: ",t.err),e.addStatus=t.err,e;case"REMOVE_MEMBER":return console.log("removed:",t.member,"from:",t.group),e.removeStatus="Success",console.log(e.removeStatus),e;case"REMOVE_MEMBER_ERROR":return console.log("Error: ",t.err),e.removeStatus=t.err,e;case"CHANGE_REMOVE_STATUS":return e.removeStatus=null,console.log(e.removeStatus),e;case"CHANGE_ADD_STATUS":return e.addStatus=null,console.log(e.addStatus),e;default:return e}},D=a(86),I=Object(f.c)({groups:_,firestore:D.firestoreReducer}),x=a(305),B=a(189),F=a.n(B);a(591);F.a.initializeApp({apiKey:"AIzaSyB4v2Fc-GxehiGCG8tCOVnbtn3WBKiSk2I",authDomain:"ushare-5a7b5.firebaseapp.com",databaseURL:"https://ushare-5a7b5.firebaseio.com",projectId:"ushare-5a7b5",storageBucket:"ushare-5a7b5.appspot.com",messagingSenderId:"573956070821"});var U=F.a,V=Object(f.e)(I,Object(f.d)(Object(f.a)(x.a.withExtraArgument({getFirebase:g.getFirebase,getFirestore:D.getFirestore})),Object(D.reduxFirestore)(U),Object(g.reactReduxFirebase)(U)));s.a.render(n.a.createElement(b.a,{store:V},n.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[308,1,2]]]);
//# sourceMappingURL=main.0bff5d75.chunk.js.map